<!DOCTYPE html>
<html>
<head>
  <meta charset='UTF-8'>
  <title>Gallery</title>
  <link rel='stylesheet' href='style.css'>
  <script src="config.js"></script>
  <script src="msal-browser.min.js"></script>
  <script src="app.js"></script>
  <script src="devAuthConfig.js"></script>
</head>
<body>
<script>
  // Allow access if Azure token exists OR manual developer credentials
  var allowAccess = false;
  if (localStorage.getItem('azureToken')) {
    allowAccess = true;
  } else if (window.msalInstance && msalInstance.getAllAccounts().length) {
    allowAccess = true;
  } else {
    var username = prompt('Enter username:');
    var password = prompt('Enter password:');
    if (username === window.devAuthConfig.username && password === window.devAuthConfig.password) {
      allowAccess = true;
    }
  }
  if (!allowAccess) {
    alert('Access denied. Please log in with Azure or use developer credentials.');
    window.location.href = 'index.html';
  }
</script>
<div class="navbar">
  <div class="logo">My App</div>
  <div class="nav-links">
  <a href="gallery.html">Gallery</a>
  <a href="contact.html">Contact Us</a>
  <a href="signup.html">Signup</a>
  <a href="download.html">Download</a>
  <a href="#" id="loginLogoutBtn" onclick="handleLoginLogout()">Login</a>
  </div>
  <div id="profileCircle" class="profile">U</div>
    <script>
      function updateLoginLogoutBtn() {
        const btn = document.getElementById('loginLogoutBtn');
        if (localStorage.getItem('azureToken')) {
          btn.innerText = 'Logout';
        } else {
          btn.innerText = 'Login';
        }
      }
      function handleLoginLogout() {
        if (localStorage.getItem('azureToken')) {
          if (window.msalInstance) {
            msalInstance.logoutPopup();
          }
          localStorage.removeItem('azureToken');
          document.getElementById('profileCircle').innerText = 'U';
          updateLoginLogoutBtn();
        } else {
          login();
        }
      }
      updateLoginLogoutBtn();
    </script>
</div>
<div class="container">
  <!-- Sidebar removed -->
<div class='main-content'>
  <h1>Gallery</h1>
  <div id="photoGrid" class="photo-grid"></div>
</div>
</div>
<script>
  // Example photo URLs
  const photos = [
    "https://via.placeholder.com/150",
    "https://via.placeholder.com/160",
    "https://via.placeholder.com/170"
  ];
  const grid = document.getElementById("photoGrid");
  photos.forEach(url => {
    const img = document.createElement("img");
    img.src = url;
    img.className = "gallery-photo";
    grid.appendChild(img);
  });
</script>
</body>
</html>